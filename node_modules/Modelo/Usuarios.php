<?php
include"Conexion.php";
define("MYSQL_CONN_ERROR", "Unable to connect to database."); 
mysqli_report(MYSQLI_REPORT_ERROR | MYSQLI_REPORT_STRICT);
class Usuario{
	
	protected $usuario;
	protected $contrasena;
	protected $rol;
	protected $habilitado;
	
	public function __construct($usuario, $contrasena,$rol){
		
		$this->usuario=$usuario;
		$this->contrasena=$contrasena;
		$this->rol=$rol;
		
		
		}
	
	
	public function insert(){
		$this->habilitado="si";
		$db = new Conexion();
		
		$sql="INSERT INTO usuarios(usuario, contrasena, rol, habilitado)VALUES('$this->usuario', '$this->contrasena','$this->rol','$this->habilitado');";
		try{
		$db->query($sql) ? $r="insertado : )" : $r= "No se Inserto  :(";
		mysql_close($db);
		echo $r;
		}catch(Exception $e) {
    echo 'ERROR:'.$e->getMessage();
}
	}
	
	static function nigunDato(){
		return new self(" "," ", " "," ");
	}
	
	public function ListarUsuarios(){
		
		$db = new Conexion();
		$i=0;
		$sql = "SELECT * FROM usuarios";
		try{
		$rs = $db->query($sql);
		
		$row = $rs->fetch_array(MYSQLI_ASSOC);
printf ("%s (%s)\n", $row["usuario"], $row["rol"]);
			
			
		$rs->free();
		
		return $r="fin";
		}catch(Exception $e){
			
			echo 'ERROR ;('.$e->getMessage();
		}
	}
	
	
}

?>